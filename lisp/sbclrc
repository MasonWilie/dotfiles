;;; Auto-install Quicklisp if needed
#-quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (unless (probe-file quicklisp-init)
    (format t "~%Installing Quicklisp...~%")
    (let ((quicklisp-url "https://beta.quicklisp.org/quicklisp.lisp")
          (quicklisp-file "/tmp/quicklisp.lisp"))
      ;; Download (requires curl or wget)
      (uiop:run-program (list "curl" "-o" quicklisp-file quicklisp-url))
      (load quicklisp-file)
      (funcall (find-symbol "INSTALL" :quicklisp-quickstart))
      (delete-file quicklisp-file)))
  ;; Load Quicklisp
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))
