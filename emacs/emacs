;; Add MELPA repository
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/") t)
(package-initialize)

;; Install sly if not already installed
(unless (package-installed-p 'sly)
  (package-refresh-contents)
  (package-install 'sly))

;; Configure SBCL
(setq inferior-lisp-program "sbcl")

;; Optional: Enable paredit for balanced parentheses
(unless (package-installed-p 'paredit)
  (package-install 'paredit))

(autoload 'enable-paredit-mode "paredit" "Turn on pseudo-structural editing of Lisp code." t)
(add-hook 'emacs-lisp-mode-hook       #'enable-paredit-mode)
(add-hook 'eval-expression-minibuffer-setup-hook #'enable-paredit-mode)
(add-hook 'ielm-mode-hook             #'enable-paredit-mode)
(add-hook 'lisp-mode-hook             #'enable-paredit-mode)
(add-hook 'lisp-interaction-mode-hook #'enable-paredit-mode)
(add-hook 'scheme-mode-hook           #'enable-paredit-mode)

;; Optional: Rainbow delimiters for colorful parentheses
(unless (package-installed-p 'rainbow-delimiters)
  (package-install 'rainbow-delimiters))

(add-hook 'prog-mode-hook #'rainbow-delimiters-mode)

;; Disable backup files
(setq make-backup-files nil)
(setq auto-save-default nil)
(setq create-lockfiles nil)

;; Install darcula-theme if not already installed
(unless (package-installed-p 'darcula-theme)
  (package-refresh-contents)
  (package-install 'darcula-theme))

;; Load the theme
(load-theme 'darcula t)

(custom-set-variables
 '(package-selected-packages '(ace-window sly rainbow-delimiters paredit))
 '(warning-suppress-types '((comp))))
(custom-set-faces
 '(font-lock-function-name-face ((t (:foreground "color-39"))))
 '(minibuffer-prompt ((t (:foreground "color-38")))))

;;; The following lines added by ql:add-to-init-file:
#-quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))

